{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pan Admin</title>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

   <link rel="stylesheet" type="text/css" href="{% static "mix/bootstrap/css/bootstrap.css" %}" >
	  <link rel="stylesheet" type="text/css" href="{% static "css/theme.css" %}">
	  <link rel="stylesheet" href="{% static "mix/font-awesome/css/font-awesome.css" %}">
	  <script src="{% static "mix/jquery-1.7.2.min.js" %}" type="text/javascript"></script>
	  <style type="tex/css">
	    body{
	         background-image: url("{% static "img/black-Linen.png" %}");
	              }
	</style>
    <!-- Demo page code -->


    <style type="text/css">
        #line-chart {
            height:300px;
            width:800px;
            margin: 0px auto;
            margin-top: 1em;
        }
        .brand { font-family: georgia, serif; }
        .brand .first {
            color: #ccc;
            font-style: italic;
        }
        .brand .second {
            color: #fff;
            font-weight: bold;
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->

  </head>

  <!--[if lt IE 7 ]> <body class="ie ie6"> <![endif]-->
  <!--[if IE 7 ]> <body class="ie ie7 "> <![endif]-->
  <!--[if IE 8 ]> <body class="ie ie8 "> <![endif]-->
  <!--[if IE 9 ]> <body class="ie ie9 "> <![endif]-->
  <!--[if (gt IE 9)|!(IE)]><!--> 
  <body class=""> 
  <!--<![endif]-->
    
    <div class="navbar">
        <div class="navbar-inner">
                <ul class="nav pull-right">
                    <li id="fat-menu" class="dropdown">
                        <a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="icon-user"></i> {{ request.session.adminsname }}
                            <i class="icon-caret-down"></i>
                        </a>

                        <ul class="dropdown-menu">
                            <li><a tabindex="-1" href="#">我的账户</a></li>
                            <li class="divider"></li>
                          
                            <li class="divider visible-phone"></li>
                            <li><a tabindex="-1" href="/admins/sign-in">切换账号</a></li>
                        </ul>
                    </li>
                    
                </ul>
			<a class="brand" href="/admins/index"><span class="second">网盘后台管理页面</span></a>
        </div>
    </div>
    


    
    <div class="sidebar-nav">
        <form class="search form-inline">
            <input type="text" placeholder="搜索文件...">
        </form>
				<a href="/admins/index" class="nav-header" ><i class="icon-dashboard"></i>网盘信息</a>
        <a href="#dashboard-menu" class="nav-header" data-toggle="collapse"><i class="icon-user"></i>用户管理</a>
        <ul id="dashboard-menu" class="nav nav-list collapse in">            
            <li ><a href="/admins/users">用户信息</a></li>
            <li ><a href="/admins/user/0">用户编辑</a></li>
            <li ><a href="/admins/check">用户审核</a></li>  <li ><a href="/admins/space-check">空间扩展审核</a></li>
        </ul>
        
        <a href="#file-menu" class="nav-header" data-toggle="collapse"><i class="icon-folder-open"></i>文件管理</a>
        <ul id="file-menu" class="nav nav-list collapse in">
            <li ><a href="/admins/files">文件信息</a></li>
            <li ><a href="/admins/file/0">文件编辑</a></li>
            <li ><a href="/admins/change_type">类型编辑</a></li>
        </ul>
        
        <a href="#data-menu" class="nav-header" data-toggle="collapse"><i class="icon-cloud"></i>数据管理</a>
        <ul id="data-menu" class="nav nav-list collapse in">
           <li ><a href="/admins/backup">数据备份并加密</a></li>
                     
        </ul>

        <a href="#accounts-menu" class="nav-header" data-toggle="collapse">
			<i class="icon-briefcase"></i>我的账户</a>
        <ul id="accounts-menu" class="nav nav-list collapse">
            <li ><a href="/admins/sign-in">登录</a></li>
            <li ><a href="/admins/sign-up">注册</a></li>
            <li ><a href="/admins/reset-password">重置密码</a></li>
        </ul>

    </div>
    

    
    <div class="content">     
        <div class="header">
        		<div class="stats">		
        			<a href="/admins/check">
						    <p class="stat text-info"><span class="number">{{ nocheck_user }}</span class="">待审核用户</p>
						  </a>
						</div>
            <h1 class="page-title">信息概览</h1>         
        </div>
        
        <ul class="breadcrumb">
            <li><a href="/admins/index">主页</a> <span class="divider">/</span></li>
            <li class="active">信息概览</li>
        </ul>

        <div class="container-fluid">
						<div class="row-fluid">
						    <div class="block">
						        <a href="#page-stats" class="block-heading" data-toggle="collapse">最新状态</a>
						        <div id="page-stats" class="block-body collapse in">
						
						            <div class="stat-widget-container">
						                <div class="stat-widget">
						                    <div class="stat-button">
						                        <p class="title">{{ user_count }}</p>
						                        <p class="detail">用 &nbsp;&nbsp;&nbsp;户</p>
						                    </div>
						                </div>
						
						                <div class="stat-widget">
						                    <div class="stat-button">
						                        <p class="title">{{ file_count }}</p>
						                        <p class="detail">文 &nbsp;&nbsp;&nbsp;件</p>
						                    </div>
						                </div>
						
						                <div class="stat-widget">
						                    <div class="stat-button">
						                        <p class="title">{{ capacity }}G</p>
						                        <p class="detail">容 &nbsp;&nbsp;&nbsp;量</p>
						                    </div>
						                </div>
						
						
						            </div>
						        </div>
						    </div>
						</div>
						
						<div class="row-fluid">
					    <div class="block span6">
					        <a href="#tablewidget" class="block-heading" data-toggle="collapse">用户信息<span class="label label-warning">{{ user_count }}</span></a>
					        <div id="tablewidget" class="block-body collapse in">
					            <table class="table">
					              <thead>
					                <tr>
					                  <th id="user_item">用户名</th>
					                  <th id="user_l_item">邮箱</th>
					                  <th id="user_item">是否审核</th>
					                </tr>
					              </thead>
					              <tbody>
								  {% for user in users%}
					                <tr>
					                  <td id="user_item">{{ user.username }}</td>
					                  <td id="user_l_item">{{ user.email }}</td>
					                  <td id="user_item">
										  {% if user.if_valid %}
										  是
										  {% else %}
										  否
										  {% endif %}
									  </td>
					                </tr>
								  {% endfor %}
					               
					              </tbody>
					            </table>
					            <p><a href="/admins/users">查看更多...</a></p>
					        </div>
					    </div>
					    <div class="block span6">
				        <div class="block-heading">
				            <span class="block-icon pull-right">
				                <a href="#" class="demo-cancel-click" rel="tooltip" title="刷新"><i class="icon-refresh"></i></a>
				            </span>
				
				            <a href="#widget2container" data-toggle="collapse">个人网盘信息</a>
				        </div>
				        <div id="widget2container" class="block-body collapse in">
				            <table class="table list">
				              <tbody>
							  	{% for user in users %}
				                  <tr>
				                      <td>
				                          <p><i class="icon-user"></i> {{ user.username }} </p>
				                      </td>
				                      <td>
				                          <p>空间：{{ user.space }}G</p>
				                      </td>
				                      <td>
				                          <p>注册时间：{{ user.create_time }}</p>
				                      </td>
				                  </tr>
								{% endfor %}
				                    
				              </tbody>
				            </table>
				            <p><a href="/admins/users">查看更多...</a></p>
				        </div>
    					</div>
						</div>
						
						
						<div class="row-fluid">
						    <div class="block">
						        <a href="#all-situation" class="block-heading" data-toggle="collapse">总网盘使用情况</a>
						        <div id="all-situation" class="block-body collapse in">
						        		<h3 style="text-align: center;margin-top: 20px;font-size: 20px;">网盘空间使用情况</h3>
						        		<div  class="col-lg-6" id="main" style="width:45%;height:300px ;float:left;margin-left: 20px;"></div>
												<div class="col-lg-6" id="container" style="width:45%;height:300px ;float:right;margin-right: 20px;"></div>					            
						        </div>
						    </div>
						</div>
        	
    </div>
    


    <script src="{% static "mix/bootstrap/js/bootstrap.js" %}"></script>
    <script type="text/javascript" src="{% static "mix/echarts.min.js" %}"></script>
    <script type="text/javascript">
        $("[rel=tooltip]").tooltip();
        $(function() {
            $('.demo-cancel-click').click(function(){return false;});
        });
    </script>
    
     <script type="text/javascript">
					var dom = document.getElementById("container");
					var myChart = echarts.init(dom);
					var app = {};
					option = null;
					option = {
					    title: {
					        text: '文件类型',
					        x:'center',
        					y: 'bottom',
					    },
					    tooltip : {
					        trigger: 'item',
					        formatter: "{b} : {d}%"
					    },
					    legend: {
					        orient: 'vertical',
					        left: 'right',
					        data: ['图片','音乐','视频','文档']
					    },
					    series : [
					        {
					            name: '类型占比',
					            type: 'pie',
					            radius : '70%',
					            center: ['50%', '50%'],
					            color:[ "#9dc3e6","#84abce","#2e75b6","#1f4e79"
],
					            data:[
					                {value:{{ img_size }}, name:'图片'},
					                {value:{{ music_size }}, name:'音乐'},
					                {value:{{ video_size }}, name:'视频'},
					                {value:{{ video_size }}, name:'文档'},
					                
					            ]
					          
					        }
					    ]
					};
					;
					if (option && typeof option === "object") {
					    myChart.setOption(option, true);
					}
       </script>
       
       <script type="text/javascript">
			    // 基于准备好的dom，初始化echarts
			    var myChart = echarts.init(document.getElementById('main'));
			    option = {
			    		title: {
					        text: '磁盘空间',
					        x:'center',
        					y: 'bottom',
					    },
			        tooltip: {//提示框，可以在全局也可以在
			            trigger: 'item',  //提示框的样式
			            formatter: "{b}: {d}%",
			            
			        },
			        legend: {  //图例
			            orient: 'vertical',  //图例的布局，竖直    horizontal为水平
			            x: 'left',//图例显示在右边
			            data:['已用空间','剩余空间'],
			            textStyle:{    //图例文字的样式
			                color:'#333',  //文字颜色
			                fontSize:12    //文字大小
			            }
			        },
			        series: [
			            {
			                name:'访问来源',
			                type:'pie', //环形图的type和饼图相同
			                radius: ['50%', '70%'],//饼图的半径，第一个为内半径，第二个为外半径
			                avoidLabelOverlap: false,
			                color:["#f4b183","#c55a11"],
			               
			               
			                data:[
			                    {value:{{ noused_capacity }}, name:'已用空间:{{ noused_capacity }}G'},
			                    {value:{{ used_capacity }}, name:'剩余空间:{{ used_capacity }}G'},
			                   
			                ]
			            }
			        ]
			    };
			    myChart.setOption(option);
			</script>
    
  </body>
</html>


